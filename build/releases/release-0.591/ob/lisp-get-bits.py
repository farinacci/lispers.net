# -----------------------------------------------------------------------------
#             
# Copyright 2013-2019 lispers.net - Dino Farinacci <farinacci@gmail.com>
# 
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
# 
#     http://www.apache.org/licenses/LICENSE-2.0
# 
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.    
# 
# -----------------------------------------------------------------------------
#
# lisp-get-bits
#
# Usage: python lisp-get-bits.py <url-for-lispers.net-image> [force]
#
# Do a wget on supplied URL and install in current directory.
# 
# -----------------------------------------------------------------------------
from __future__ import print_function
from builtins import input
import sys
import os
if 64 - 64: i11iIiiIii
if 65 - 65: O0 / iIii1I11I1II1 % OoooooooOO - i1IIi
if 73 - 73: II111iiii
if 22 - 22: I1IiiI * Oo0Ooo / OoO0O00 . OoOoOO00 . o0oOOo0O0Ooo / I1ii11iIi11i
if ( len ( sys . argv ) == 1 ) :
 print ( ( "Usage: python lisp-get-bits.py <url-for-lispers.net-image> " + "[force]" ) )
 if 48 - 48: oO0o / OOooOOo / I11i / Ii1I
 exit ( 1 )
 if 48 - 48: iII111i % IiII + I1Ii111 / ooOoO0o * Ii1I
 if 46 - 46: ooOoO0o * I11i - OoooooooOO
 if 30 - 30: o0oOOo0O0Ooo - O0 % o0oOOo0O0Ooo - OoooooooOO * O0 * OoooooooOO
 if 60 - 60: iIii1I11I1II1 / i1IIi * oO0o - I1ii11iIi11i + o0oOOo0O0Ooo
 if 94 - 94: i1IIi % Oo0Ooo
if ( os . system ( "which wget > /dev/null" ) != 0 ) :
 print ( "wget not installed" )
 exit ( 1 )
 if 68 - 68: Ii1I / O0
 if 46 - 46: O0 * II111iiii / IiII * Oo0Ooo * iII111i . I11i
Oo0oO0ooo = ( "force" in sys . argv )
if 56 - 56: I11i - i1IIi
o00oOoo = sys . argv [ 1 ]
O0OOo = o00oOoo . split ( "/" ) [ - 1 ]
II1Iiii1111i = O0OOo . find ( "tgz" ) + len ( "tgz" )
O0OOo = O0OOo [ 0 : II1Iiii1111i ]
if 25 - 25: Ii1I
if 89 - 89: OoooooooOO - IiII * ooOoO0o
if 82 - 82: I11i . I1Ii111 / IiII % II111iiii % iIii1I11I1II1 % IiII
if 86 - 86: OoOoOO00 % I1IiiI
if ( Oo0oO0ooo == False and os . path . exists ( O0OOo ) ) :
 oo = "{} already exists, remove it? (y/n): " . format ( O0OOo )
 if ( input ( oo ) != "y" ) : exit ( 0 )
 os . system ( "rm -fr {}" . format ( O0OOo ) )
 if 33 - 33: II111iiii * Oo0Ooo - o0oOOo0O0Ooo * iIii1I11I1II1 * OoooooooOO * ooOoO0o
 if 27 - 27: OoO0O00
 if 73 - 73: o0oOOo0O0Ooo - Oo0Ooo
 if 58 - 58: i11iIiiIii % I1Ii111
 if 54 - 54: OOooOOo % O0 + I1IiiI - iII111i / I11i
print ( "Downloading {} ..." . format ( o00oOoo ) )
if 31 - 31: OoO0O00 + II111iiii
if ( os . system ( "wget -q {}" . format ( o00oOoo ) ) != 0 ) :
 print ( "Could not download image" )
 exit ( 1 )
 if 13 - 13: OOooOOo * oO0o * I1IiiI
os . system ( "mv file {}" . format ( O0OOo ) )
if 55 - 55: II111iiii
if 43 - 43: OoOoOO00 - i1IIi + I1Ii111 + Ii1I
if 17 - 17: o0oOOo0O0Ooo
if 64 - 64: Ii1I % i1IIi % OoooooooOO
if ( Oo0oO0ooo == False ) :
 i1iIIi1 = input ( "Do you want to install image? (y/n): " )
 if ( i1iIIi1 != "y" ) : exit ( 0 )
 if 50 - 50: i11iIiiIii - Ii1I
 if 78 - 78: OoO0O00
print ( "Untaring {} ..." . format ( O0OOo ) )
if ( os . system ( "tar zxvf {}" . format ( O0OOo ) ) != 0 ) :
 print ( "Could not untar image" )
 exit ( 1 )
 if 18 - 18: O0 - iII111i / iII111i + ooOoO0o % ooOoO0o - IiII
 if 62 - 62: iII111i - IiII - OoOoOO00 % i1IIi / oO0o
print ( "To restart the LISP subsystem, run './RESTART-LISP'" )
exit ( 0 )
# dd678faae9ac167bc83abf78e5cb2f3f0688d3a3
